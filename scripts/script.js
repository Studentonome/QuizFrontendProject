var book = [
    null,
    {
        'main':'Кольб был храбрым северянином-воином. Как-то раз вождь приказал ему убить злого дракона, который угрожал деревне. "Иди через горный перевал, Кольб," - сказал вождь. "На той стороне ты найдешь дракона."',
        'option1':{
            'value':2,
            'text':'Перейти на следующую страницу'
        },
        'option2':null,
        'option3':null,
        'end':null
    },
    {
        'main':' Кольб взял свой любимый топор и щит и пошел к горному перевалу. Там он увидел пещеру, где гулял ветер, ледяную пещеру и узкую тропинку.',
        'option1':{
            'value':17,
            'text':'Войти в ледяную пещеру'
        },
        'option2':{
            'value':8,
            'text':'Войти в пещеру, где гуляет ветер'
        },
        'option3':{
            'value':12,
            'text':'Пойти по тропинке'
        },
        'end':null
    },
    {
        'main':'Кольб поднялся на каменистый холм. Он увидел внизу спящего дракона, а у дороги неподалеку он увидел таверну.',
        'option1':{
            'value':16,
            'text':'Спуститься вниз'
        },
        'option2':{
            'value':14,
            'text':'Заглянуть в таверну'
        },
        'option3':null,
        'end':null
    },
    {
        'main':'Кольб шел по запаху и наткнулся на грязного, вонючего орка! Орк зарычал и занес над героем свою шипастую дубину.',
        'option1':{
            'value':9,
            'text':'Поднять щит'
        },
        'option2':{
            'value':13,
            'text':'Замахнуться топором'
        },
        'option3':null,
        'end':null
    },
    {
        'main':'Осторожно ступая по болоту, Кольб увидел, что путь ему преградил скорбно воющий призрак.',
        'option1':{
            'value':15,
            'text':'Напасть на призрака'
        },
        'option2':{
            'value':10,
            'text':'Дать призраку золото'
        },
        'option3':null,
        'end':null
    },
    {
        'main':'Топор застрял в могучей чешуйчатой шее чудовища. Оно взвыло и забило хвостом, но Кольб не сдавался и в конце концов, орудуя топором как пилой, отделил голову дракона от тела. Кольб вернулся домой с победой, и его деревне драконы больше никогда не угрожали.',
        'option1':null,
        'option2':null,
        'option3':null,
        'end':true
    },
    {
        'main':'Оставив болото позади, Кольб увидел неподалеку логово дракона, а также небольшую уютную таверну.',
        'option1':{
            'value':16,
            'text':'Отправиться в логово дракона'
        },
        'option2':{
            'value':14,
            'text':'Отправиться в таверну'
        },
        'option3':null,
        'end':null
    },
    {
        'main':'Сильный порыв ветра загасил факел Кольба и столкнул его в яму. Кольб свернул шею и умер.',
        'option1':null,
        'option2':null,
        'option3':null,
        'end':true
    },
    {
        'main':'Орк противно захихикал, когда его дубина расщепила щит Кольба и врезалась ему прямо в лицо. Кольб умер, и орк сварил себе похлебку из его костей.',
        'option1':null,
        'option2':null,
        'option3':null,
        'end':true
    },
    {
        'main':'Кольб вспомнил, что рассказывала ему бабушка, и протянул два золотых призраку. Тот растворился в воздухе, открыв Кольбу путь.',
        'option1':{
            'value':7,
            'text':'Перейти на следующую страницу'
        },
        'option2':null,
        'option3':null,
        'end':null
    },
    {
        'main':'Кольб начал подбираться к брюху чудовища, но как только он выпустил из виду голову дракона, его пасть распахнулась и проглотила Кольба целиком, прямо с топором и всем прочим.',
        'option1':null,
        'option2':null,
        'option3':null,
        'end':true
    },
    {
        'main':'Поднявшись наверх, Кольб обнаружил лагерь. Там он встретил мудреца, который разделил с ним трапезу и показал два пути, ведущие в логово дракона. Первый вел через холмы, а второй - через болото.',
        'option1':{
            'value':3,
            'text':'Отправиться на холмы'
        },
        'option2':{
            'value':5,
            'text':'Отправиться на болото'
        },
        'option3':null,
        'end':null
    },
    {
        'main':'Кольб широко размахнулся топором, и не успел орк ударить, его голова и дубина покатились по полу. Они ему больше не понадобятся.',
        'option1':{
            'value':3,
            'text':'Перейти на следующую страницу'
        },
        'option2':null,
        'option3':null,
        'end':null
    },
    {
        'main':'Кольб решил остановиться в таверне, чтобы отдохнуть перед боем с драконом. Но таверной управляли Высокие эльфы, и они отравили его мед, чтобы забрать его золото себе.',
        'option1':null,
        'option2':null,
        'option3':null,
        'end':true
    },
    {
        'main':'Кольб замахнулся топором изо всей силы, но призрак этого будто бы даже не заметил. Он приблизился к Кольбу, и тот погрузился в глубокий сон, и никогда больше не проснулся.',
        'option1':null,
        'option2':null,
        'option3':null,
        'end':true
    },
    {
        'main':'Кольб обнаружил логово, где спал дракон. Клубы дыма вырывались из его ноздрей, а воздух в пещере резал глаза. Кольб едва не поскользнулся на человеческих костях, на которых не оставалось ни кусочка мяса. Чудовище лежало на боку, открыв для удара брюхо и глотку.',
        'option1':{
            'value':6,
            'text':'Нанести удар по шее'
        },
        'option2':{
            'value':11,
            'text':'Нанести удар в брюхо'
        },
        'option3':null,
        'end':null
    },
    {
        'main':'Кольб вошел в обледенелую пещеру, но он был северянином, поэтому не замерз. Перед ним был тоннель, из которого чем-то воняло, а в тоннеле слева от него завывал ветер. И еще рядом была лестница.',
        'option1':{
            'value':4,
            'text':'Пойти по вонючему тоннелю'
        },
        'option2':{
            'value':8,
            'text':'Пойти по ветреному тоннелю'
        },
        'option3':{
            'value':12,
            'text':'Подняться по лестнице наверх'
        },
        'end':null
    },
]

console.log(book);

var current = 1;
var mainText = document.getElementById("mainText");
var opt1Text = document.getElementById("opt1Text");
var opt2Text = document.getElementById("opt2Text");
var opt3Text = document.getElementById("opt3Text");
var endText = document.getElementById("endText");

function update(num){
    current = num;
    if(book[num].end)
    {
        mainText.innerHTML=book[num].main;
        endText.innerHTML="КОНЕЦ";
        opt1Text.innerHTML="";
        opt2Text.innerHTML="";
        opt3Text.innerHTML="";
    }
    else
    {
        mainText.innerHTML=book[num].main;
        endText.innerHTML="";

        if(book[num].option1)
        {opt1Text.innerHTML=book[num].option1.text;}
        else
        {opt1Text.innerHTML="";}

        if(book[num].option2)
        {opt2Text.innerHTML=book[num].option2.text;}
        else
        {opt2Text.innerHTML="";}

        if(book[num].option3)
        {opt3Text.innerHTML=book[num].option3.text;}
        else
        {opt3Text.innerHTML="";}
    }
}

opt1Text.addEventListener("click",(e)=>{
    update( book[current].option1.value );
    e.preventDefault();
})
opt2Text.addEventListener("click",(e)=>{
    update( book[current].option2.value );
    e.preventDefault();
})
opt3Text.addEventListener("click",(e)=>{
    update( book[current].option3.value );
    e.preventDefault();
})
endText.addEventListener("click",(e)=>{
    update(1);
    e.preventDefault();
})

update(1);

/*
{
    'value':,
    'text':''
}
{
        'main':'',
        'option1':,
        'option2':,
        'option3':,
        'end':null
    },
*/
